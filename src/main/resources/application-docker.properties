# ============================
# App & Profiles
# ============================
spring.application.name=MrPot
# ???? dev??????????? SPRING_PROFILES_ACTIVE=prod ??
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# ============================
# Server
# ============================
server.port=${PORT:8080}
server.shutdown=graceful
spring.mvc.problemdetails.enabled=true

# ============================
# OpenAPI / Swagger UI
# ============================
# UI at /swagger ; JSON at /v3/api-docs ; YAML at /v3/api-docs.yaml
springdoc.swagger-ui.path=/swagger
springdoc.api-docs.path=/v3/api-docs
springdoc.default-consumes-media-type=application/json
springdoc.default-produces-media-type=application/json
springdoc.writer-with-default-pretty-printer=true
springdoc.swagger-ui.operationsSorter=alpha
springdoc.swagger-ui.tagsSorter=alpha
springdoc.show-actuator=true

# ============================
# DataSource (main app DB, Railway Postgres)
# ============================
# Railway Postgres ????? PG* ??????
#   PGUSER, PGPASSWORD, PGDATABASE,
#   PGHOST, PGPORT, PGHOST_PRIVATE, PGPORT_PRIVATE
#
# ????? Project ?? Spring Boot ??????????????
#   SPRING_DATASOURCE_URL=jdbc:postgresql://${PGHOST_PRIVATE}:${PGPORT_PRIVATE}/${PGDATABASE}
#   SPRING_DATASOURCE_USERNAME=${PGUSER}
#   SPRING_DATASOURCE_PASSWORD=${PGPASSWORD}
#
# ?????????
# 1????? SPRING_DATASOURCE_*??????????????????
# 2????? SPRING_DATASOURCE_*?????? PG* ??
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://${PGHOST_PRIVATE:${PGHOST:localhost}}:${PGPORT_PRIVATE:${PGPORT:5432}}/${PGDATABASE:railway}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${PGUSER:postgres}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${PGPASSWORD:}}

spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect


spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ============================
# Kafka (producer/consumer baseline)
# ============================
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
spring.kafka.client-id=${spring.application.name}
spring.kafka.properties.request.timeout.ms=30000
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP:${spring.application.name}-grp}
spring.kafka.consumer.auto-offset-reset=latest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.producer.acks=all
spring.kafka.producer.compression-type=snappy

# ============================
# Actuator
# ============================
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=when_authorized

# ============================
# LangChain4j - OpenAI (Spring Boot starter)
# ============================
# Chat model???/??????????
langchain4j.open-ai.chat-model.api-key=${OPENAI_API_KEY:}
langchain4j.open-ai.chat-model.model-name=${OPENAI_MODEL:gpt-4o-mini}
langchain4j.open-ai.chat-model.temperature=${OPENAI_TEMPERATURE:0.2}
langchain4j.open-ai.chat-model.max-output-tokens=${OPENAI_MAX_OUTPUT_TOKENS:256}

# Embedding model?? pgvector / Supabase ??
langchain4j.open-ai.embedding-model.api-key=${OPENAI_API_KEY:}
langchain4j.open-ai.embedding-model.model-name=${OPENAI_EMBEDDING_MODEL:text-embedding-3-small}

# ============================
# Supabase pgvector (???????)
# ============================
mrpot.supabase.host=${SUPABASE_HOST:db.yiqrlnaxgydxgqxywxop.supabase.co}
mrpot.supabase.port=${SUPABASE_PORT:5432}
mrpot.supabase.database=${SUPABASE_DATABASE:postgres}
mrpot.supabase.user=${SUPABASE_USER:postgres}
mrpot.supabase.password=${SUPABASE_PASSWORD:}
mrpot.supabase.schema=${SUPABASE_SCHEMA:public}
mrpot.supabase.table=${SUPABASE_TABLE:kb_documents}
mrpot.supabase.embedding-dimension=${SUPABASE_EMBEDDING_DIMENSION:1536}

# ============================
# CORS
# ============================
app.cors.allowed-origins=https://www.yuqi.site,https://yuqi.site,http://localhost:3000,www.yuqi.site
