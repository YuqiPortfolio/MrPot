# --- App ---
spring.application.name=MrPot

# --- Server ---
server.port=${PORT:8080}
server.shutdown=graceful
spring.mvc.problemdetails.enabled=true

# --- OpenAPI / Swagger UI ---
# UI at /swagger ; JSON at /v3/api-docs ; YAML at /v3/api-docs.yaml
springdoc.swagger-ui.path=/swagger
springdoc.api-docs.path=/v3/api-docs
springdoc.default-consumes-media-type=application/json
springdoc.default-produces-media-type=application/json
springdoc.writer-with-default-pretty-printer=true
springdoc.swagger-ui.operationsSorter=alpha
springdoc.swagger-ui.tagsSorter=alpha
springdoc.show-actuator=true

# --- DataSource (Railway Postgres) ---
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://${PGHOST_PRIVATE:${RAILWAY_PRIVATE_DOMAIN:${PGHOST:${RAILWAY_TCP_PROXY_DOMAIN:localhost}}}}:${PGPORT_PRIVATE:${PGPORT:${RAILWAY_TCP_PROXY_PORT:5432}}}/${PGDATABASE:${POSTGRES_DB:postgres}}?sslmode=require}
spring.datasource.username=${PGUSER:${POSTGRES_USER:postgres}}
spring.datasource.password=${PGPASSWORD:${POSTGRES_PASSWORD:postgres}}

# Driver class (standard for PostgreSQL)
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate configuration (optional, adjust as needed)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# --- Kafka (producer/consumer baseline) ---
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
spring.kafka.client-id=${spring.application.name}
spring.kafka.properties.request.timeout.ms=30000
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP:${spring.application.name}-grp}
spring.kafka.consumer.auto-offset-reset=latest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.producer.acks=all
spring.kafka.producer.compression-type=snappy

# --- Actuator ---
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=when_authorized

# ============================
# Supabase pgvector
# ============================
mrpot.supabase.host=${SUPABASE_HOST:db.yiqrlnaxgydxgqxywxop.supabase.co}
mrpot.supabase.port=${SUPABASE_PORT:5432}
mrpot.supabase.database=${SUPABASE_DATABASE:postgres}
mrpot.supabase.user=${SUPABASE_USER:postgres}
mrpot.supabase.password=${SUPABASE_PASSWORD:postgres}
mrpot.supabase.schema=${SUPABASE_SCHEMA:public}
mrpot.supabase.table=${SUPABASE_TABLE:kb_documents}
mrpot.supabase.embedding-dimension=${SUPABASE_EMBEDDING_DIMENSION:1536}
# --- LangChain4j (OpenAI example; set your keys via env) ---
langchain4j.open-ai.api-key=${OPENAI_API_KEY:}
langchain4j.open-ai.chat-model.name=${OPENAI_MODEL:gpt-4o-mini}
langchain4j.open-ai.chat-model.temperature=${OPENAI_TEMPERATURE:0.2}
langchain4j.open-ai.max-output-tokens=${OPENAI_MAX_OUTPUT_TOKENS:256}
# pgvector usage will be configured in your beans/repository layer

# CORS allowed origins (comma-separated)
app.cors.allowed-origins=https://www.yuqi.site,https://yuqi.site,http://localhost:3000,www.yuqi.site
